<div class="w-full border bg-gray-900 border-gray-400 rounded-lg px-2.5 py-2">
  <div class="border-b border-gray-700 py-1 text-center">
    <span class="text-gray-100 text-sm font-bold">Communities</span>
  </div>

  <div [@expandCollapse]="showAllCommunities ? 'expanded' : 'collapsed'">
    <div class="py-2 flex flex-col gap-3">
      <div *ngFor="let item of visibleCommunities" class="flex flex-row gap-2 hover:cursor-pointer hover:bg-gray-800 transition-all px-0.5 py-1 rounded-lg">
        <img [src]="item.image" alt="" class="size-10 rounded-full transition-transform">
        <div class="flex flex-col min-w-0 flex-1">
          <span class="text-gray-100 text-sm font-bold truncate hover:text-blue-400 transition-colors">
            {{ item.name.length > 8 ? item.name.slice(0, 8) + '...' : item.name }}
          </span>
          <span class="text-gray-500 text-xs font-light">
            {{ item.members }} members
          </span>
        </div>
      </div>
    </div>
  </div>

  <div class="text-center pt-2 border-t border-gray-700 mt-2"
       (click)="toggleShowCommunities()"
       *ngIf="communitiesList.length > 4">
    <button class="text-blue-400 hover:text-blue-300 text-xs font-medium transition-colors flex items-center justify-center gap-1 w-full hover:cursor-pointer">
      {{ showAllCommunities ? 'Show less' : 'Show more' }}
      <svg class="w-4 h-4 transform transition-transform"
           [class.rotate-180]="showAllCommunities"
           fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
      </svg>
    </button>
  </div>
</div>
